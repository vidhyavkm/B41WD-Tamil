<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Image Sprite</title>
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!-- Image Sprite CSS -->
  <link href="image_sprite/ip2location-image-sprite.css" rel="stylesheet">
</head>
<body>
    <script>
        //4 steps
        //1. create XHR object by using new keyword
        //2. opening a connection => 3 parameteres(1.http method:GET,2.api url, 3.true(optional,to handle errors))
        //3. sending the request// initiate the connection
        //4. server response(JSON format=> .parse)
        //request : userdefined

let request  = new XMLHttpRequest();

request.open('GET','https://restcountries.com/v3.1/all',true)

request.send();

request.onload = function() { //onload event=> to loading the page 

 let data = JSON.parse(request.response)
 console.log(data)
console.log(data[100].area)
// console.log(data[i].flag)
// console.log(data[0].name.common)

//for loop

for( i=0; i<data.length; i++){
    console.log(data[i].flag)
}
// // //forof
// // for (var obj of data){
// //     console.log(obj.name)
// // }

// var res1 = data.filter((element)=>element.region==="Asia")
// console.log(res1)

// // //

// data.filter((element)=>{
// for (let key in element.languages){
//     if(element.languages[key].eng="English"){
//         console.log(element.name.common)
//     }
// }
// })
// var res2= res1.map((element)=> element.name.common)
// console.log(res2)
async function getCurrency(){
    var response= await fetch('https://restcountries.com/v2/all')
    var data= await response.json()
    // XML 
    console.log(data)
    // console.log(data.currencies[0].code)

    // data.filter(element=>{
    //     for(let item in element.currencies){
    //         if(element.currencies[item].code=="USD"){
    //             return true
    //         }
    //     }
    // }).map(element=>console.log(element.name))
    data.filter(element=>{
        // console.log(element.currencies)
        // object 
        for (let key in element.currencies){
            // console.log(key)
            if(element.currencies[key].code==="USD"){
                console.log(element.name)
            }
        }
    })
}
getCurrency()
}
    </script>
</body>